<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>CGPA Calculator Live</title>
    <style>
        body { margin: 0; background-color: #2c3e50; color: white; display: flex; justify-content: center; align-items: center; height: 100vh; font-family: sans-serif; }
    </style>
</head>
<body>
    <div id="status">Loading Java Engine... Please wait 30 seconds.</div>
    <div id="container" style="width:100vw; height:100vh; position: absolute; top: 0; left: 0;"></div>

    <script src="https://cjrtnc.leaningtech.com/2.3/loader.js"></script>
    
    <script>
        // This function only starts once the script above is 100% loaded
        async function startApp() {
            try {
                await cheerpjInit();
                cheerpjCreateDisplay(-1, -1, document.getElementById("container"));
                await cheerpjRunJar("/app/cgpa-web/calculator.jar");
                document.getElementById("status").style.display = "none";
            } catch (e) {
                document.getElementById("status").innerHTML = "Error: " + e;
            }
        }

        // Check every half second if the tool is ready
        let checkReady = setInterval(() => {
            if (typeof cheerpjInit !== 'undefined') {
                clearInterval(checkReady);
                startApp();
            }
        }, 500);
    </script>
</body>
</html>
